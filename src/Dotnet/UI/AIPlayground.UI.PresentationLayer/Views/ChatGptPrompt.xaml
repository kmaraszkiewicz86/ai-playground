<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:resources="clr-namespace:AIPlayground.UI.PresentationLayer.Resources"
             xmlns:converters="clr-namespace:AIPlayground.UI.PresentationLayer.Converters"
             x:Class="AIPlayground.UI.PresentationLayer.Views.ChatGptPrompt"
             Title="ChatGPT Prompt">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:StringIsNotEmptyConverter x:Key="StringIsNotEmptyConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ScrollView>
        <Grid Padding="20" RowSpacing="15">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <!-- Ask Question Label -->
            <Label 
                Grid.Row="0"
                Text="{x:Static resources:Translation.AskQuestion}"
                FontSize="18"
                FontAttributes="Bold" />
            
            <!-- Question Input -->
            <Editor 
                Grid.Row="1"
                Text="{Binding Question}"
                Placeholder="{x:Static resources:Translation.QuestionPlaceholder}"
                HeightRequest="100" />
            
            <!-- Submit Button -->
            <Button 
                Grid.Row="2"
                Text="{x:Static resources:Translation.Submit}"
                Command="{Binding SubmitCommand}"
                WidthRequest="200" />
            
            <!-- Loading Indicator -->
            <ActivityIndicator 
                Grid.Row="3"
                IsRunning="{Binding IsBusy}"
                IsVisible="{Binding IsBusy}"
                Color="Blue" />
            
            <!-- Error Message with better visibility -->
            <Border 
                Grid.Row="4"
                IsVisible="{Binding ErrorMessage, Converter={StaticResource StringIsNotEmptyConverter}}"
                BackgroundColor="#FFF0F0"
                Stroke="Red"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 5"
                Padding="10">
                <Grid ColumnSpacing="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    
                    <Label 
                        Grid.Column="0"
                        Text="âš "
                        FontSize="20"
                        TextColor="Red" />
                    <Label 
                        Grid.Column="1"
                        Text="{Binding ErrorMessage}"
                        TextColor="Red"
                        FontSize="14"
                        FontAttributes="Bold" />
                </Grid>
            </Border>
            
            <!-- Result Label -->
            <Label 
                Grid.Row="5"
                Text="{x:Static resources:Translation.Result}"
                FontSize="18"
                FontAttributes="Bold" />
            
            <!-- Response Display -->
            <Border 
                Grid.Row="6"
                Stroke="LightGray"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 5"
                Padding="10">
                <Label 
                    Text="{Binding Response}"
                    FontSize="14"
                    LineBreakMode="WordWrap" />
            </Border>
        </Grid>
    </ScrollView>
</ContentPage>