<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:resources="clr-namespace:AIPlayground.UI.PresentationLayer.Resources"
             xmlns:converters="clr-namespace:AIPlayground.UI.PresentationLayer.Converters"
             x:Class="AIPlayground.UI.PresentationLayer.Views.ChatGptPrompt"
             Title="ChatGPT Prompt">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:StringIsNotEmptyConverter x:Key="StringIsNotEmptyConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            <!-- Ask Question Label -->
            <Label 
                Text="{x:Static resources:Translation.AskQuestion}"
                FontSize="18"
                FontAttributes="Bold" />
            
            <!-- Question Input -->
            <Editor 
                Text="{Binding Question}"
                Placeholder="{x:Static resources:Translation.QuestionPlaceholder}"
                HeightRequest="100"
                AutoSize="TextChanges" />
            
            <!-- Submit Button -->
            <Button 
                Text="{x:Static resources:Translation.Submit}"
                Command="{Binding SubmitQuestionCommand}"
                HorizontalOptions="Center"
                WidthRequest="200" />
            
            <!-- Loading Indicator -->
            <ActivityIndicator 
                IsRunning="{Binding IsBusy}"
                IsVisible="{Binding IsBusy}"
                Color="Blue"
                HorizontalOptions="Center" />
            
            <!-- Error Message with better visibility -->
            <Frame 
                IsVisible="{Binding ErrorMessage, Converter={StaticResource StringIsNotEmptyConverter}}"
                BackgroundColor="#FFF0F0"
                BorderColor="Red"
                CornerRadius="5"
                Padding="10"
                HasShadow="False">
                <HorizontalStackLayout Spacing="10">
                    <Label 
                        Text="âš "
                        FontSize="20"
                        TextColor="Red"
                        VerticalOptions="Center" />
                    <Label 
                        Text="{Binding ErrorMessage}"
                        TextColor="Red"
                        FontSize="14"
                        FontAttributes="Bold"
                        VerticalOptions="Center"
                        HorizontalOptions="FillAndExpand" />
                </HorizontalStackLayout>
            </Frame>
            
            <!-- Result Label -->
            <Label 
                Text="{x:Static resources:Translation.Result}"
                FontSize="18"
                FontAttributes="Bold" />
            
            <!-- Response Display -->
            <Frame 
                BorderColor="LightGray"
                CornerRadius="5"
                Padding="10">
                <Label 
                    Text="{Binding Response}"
                    FontSize="14"
                    LineBreakMode="WordWrap" />
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>